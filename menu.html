<!DOCTYPE html>
<html lang="en">
<!-- Mirrored from wanteat.kwst.net/site/menu.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Feb 2024 08:24:36 GMT -->

<head>
  <!--=============== basic  ===============-->
  <meta charset="UTF-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>WantEat - Responsive Restaurant / Cafe / Pub Template</title>
  <!--=============== css  ===============-->
  <link type="text/css" rel="stylesheet" href="css/plugins.css" />
  <link type="text/css" rel="stylesheet" href="css/style.css" />
  <!--=============== favicons ===============-->
  <link rel="shortcut icon" href="images/favicon.ico" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-Bs8jhsLNUVffwq7Lv6ZsJGqmKuPDkfdpY9c5FZsz6xti9KmdgO4z9F7tQ3aJfF13aM3FU9OY4/C1CKPH55j8Zw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <style> 
  .header_half-reser_btn {
    background-color: #ffcc00; /* Change the background color */
    color: #fff; /* Change the text color */   
} 

.header_half-reser_btn:hover {
    background-color: #ffa500; /* Change the background color on hover */
    color: #fff; /* Change the text color on hover */
}
.cart-header {
    columns: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer; /* Add cursor pointer */
}

#cart_items:hover #cart-text strong {
    color: red; /* Change color on hover */
}

.cart-arrow {
    margin-left: 5px;
}

#cart_items:hover .cart-arrow i {
    color: red; /* Change color on hover */
}


</style>
</head>

<body>
  <!--loader-->
  <div class="main-loader">
    <div class="loader-wrap">
      <span class="loader"></span>
    </div>
  </div>
  <!--loader end-->
  <!--  main   -->
  <div id="main">
    <a class="logo-holder"><img src="images/logo.png" alt="" /></a>
    <!--  header  -->
    <header class="header_half">
      <div class="header-inner">
        <div class="share-btn show-share isShare"></div>
        <!-- <a href="alltables.html"> -->
        <!-- <div class="back_half-reser_btn " id="backButton"><span style="color: black;">Back</span></div> -->
        <!-- </a> -->
        <a>
        <div class="cart-btn sc_btn" onclick="openOrder()"><strong>Your Order</strong><i
          class="fas fa-shopping-bag"></i><span id="order-item-count" class="cart-btn_counter">0</span>
        </div>
      </a>
        <div class="cart-btn sc_btn" style="margin-right: 20px;"><strong>Your Cart</strong><i onclick="openCart()"
          class="fa-thin fa-basket-shopping-simple"></i><span id="cart-item-count" class="cart-btn_counter">0</span>
        </div>
        <!-- <div class="header_half-reser_btn" id="table-number"><span>Table Number:</span></div> -->
        <div class="nav-button_wrap isvis_hid_menu" id="home_menu_opt">
          <div class="nav-button"><span></span></div>
        </div>
      </div>
    </header>

    <!--  header end  -->

    <!--  navigation -->
    <div class="hidden_menu-container">
      <div class="nav-wrapper isvis_menu hiddenmenu">
        <div class="nav-separator"><span></span></div>
        <div class="nav-wrap">
          <div class="fl-wrap">
            <div class="nav_dec"><span></span></div>
          </div>
          <div class="nav-container fl-wrap">
            <!-- nav -->
            <nav class="nav-inner" id="menu_init">
              <ul>
                <li id="home_icon">
                  <a href="index.html" class="act-link">Home </a>
                </li>
                <li ><a href="menu.html" class="act-link"> Menu</a></li>
                <!-- <li><a href="contacts.html">Contacts</a></li> -->
                <!-- <li><a href="blog.html">Blog</a></li> -->
              </ul>
            </nav>
            <!-- nav end-->
          </div>
          <div class="fl-wrap">
            <div class="nav_dec nd_bottom"><span></span></div>
          </div>
        </div>
        <div class="nav-social">
          <ul>
            <li>
              <a href="#" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
            </li>
            <li>
              <a href="#" target="_blank"><i class="fa-brands fa-instagram"></i></a>
            </li>
          </ul>
        </div>
      </div>
      <div class="body-ovelay fs-wrapper"></div>
    </div>
    
    <!--  navigation  end-->
    <!--column-image-->
    <div class="column-image">
      <div class="border-bg">
        <div class="bg" data-bg="images/bg/long/1.jpg"></div>
        <div class="overlay"></div>
        <!-- <div class="back_half-reser_btn " id="backButton"><span style="color: black;">Back</span></div> -->
        <!-- <button id="backButton" class="back_half-reser_btn">Back</button> -->
      </div>
      <div class="column-image-title" style="margin-top: -150px;">
        <!-- <button id="backButton" class="back_half-reser_btn_mob"style="margin-top:50px;>Back</button> -->
        <h2>Discover Our Menu</h2>
        <p>
          Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse
          quam nihil molestiae consequatur.
        </p>
        <h2 id="table-number"><span>Table Number:</span></h2><br>
        <button id="backButton" class="back_half-reser_btn">Back</button>
      </div>
    </div>
    <!--column-image end-->
    <div class="column-image mob-hidden">
      <div class="border-bg">
        <div class="bg" data-bg="images/bg/long/1.jpg"></div>
        <div class="overlay"></div>
      </div>
    </div>
    <!--column-wrap-->
    <div class="column-wrap single_colimn-wrap vis_cimg">
      <!--section-->
      <div class="content-section column-wrap-section menu-section_wrap white-bg" data-scrollax-parent="true" id="sec2">
        <div class="container small-container">
          <!-- Dynamic menu sections will be appended here -->
        </div>
        <div class="dishes-nav-container scroll-fixed-column-content" id="cart_items">
          <div class="container small-container">
            <div class="dishes-nav-content">
              <!-- <div class="dishes-nav_title">
                Added Itemes <i class="fa-thin fa-chevron-up"></i>
              </div> -->
              <div class="dishes-nav">
                <nav class="dishes-nav_init">
                  <ul id="menu-sections-nav">
                    Links for dynamic menu sections will be appended here
                  </ul>
                </nav>
              </div>
              <!-- <a href="#" download class="dwonload_btn">Download </a> -->
              <div class="cart-header" id="cart-header" style="font-weight: 100; font-size: large; color: #fff" onclick="openCart()">
                <span id="cart-text" style="margin-top: 30px;"><strong><span id="cart-count" style="color: #ff6600; font-weight: bold; font-size: 24px;margin-right: 10px;">0</span>
                  Items are added </strong></span>
                <!-- <span id="cart-item-count" class="cart-btn_counter">0</span> -->
                <span class="cart-arrow" style="margin-top: 30px;">
                    <i class="fas fa-chevron-right"></i><i class="fas fa-chevron-right"></i><i class="fas fa-chevron-right"></i>
                </span>
            </div>
            </div>
          </div>
        </div>
        <div class="parallax-element" style="left: 20px; bottom: -50px">
          <img src="images/bg/dec/1.png" alt="" />
        </div>
        <div class="parallax-element" style="right: 10%; top: 90px">
          <img src="images/bg/dec/2.png" alt="" />
        </div>
        <div class="limit-box"></div>
      </div>
      <!--section end-->
      <!-- <div class="order-wrap">
          <div class="container small-container">
            <h4>Ready To Visit Our Restaurant</h4>
            <a href="#" class="btn radius_btn show-rb"
              >Book Table Now<i class="fa-regular fa-chevrons-right"></i
            ></a>
          </div>
        </div> -->
    </div>
    <!--column-wrap end-->
    <!--footer  -->
    <div class="height-emulator fl-wrap"></div>
    <footer class="main-footer column_footer">
      <div class="main-footer_content fl-wrap">
        <div class="container small-container">
          <div class="footer-top">
            <div class="row">
              <div class="col-md-5">
                <div class="footer-social">
                  <div class="footer-social-title">Follow us:</div>
                  <ul>
                    <li>
                      <a href="#" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
                    </li>
                    <li>
                      <a href="#" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="footer-inner">
            <div class="row">
              <div class="col-md-5">
                <div class="footer-widget">
                  <div class="footer-widget-title">About Us</div>
                  <div class="footer-widget-content">
                    <div class="footer-box">
                      <p>
                        Numerous commentators have also referred to the
                        supposed restaurant owner's eccentric habit of touting
                        for custom outside his establishment, dressed in
                        aristocratic fashion and brandishing a sword.
                      </p>
                    </div>
                    <!-- <a href="about.html" class="footer-widget-content-link">Read more</a>                                                    	 -->
                  </div>
                </div>
              </div>
              <!--footer social links-->
              <!--subscribe form-->
              <div class="col-md-4">
                <div class="footer-widget">
                  <div class="footer-widget-title">Contact Info</div>
                  <div class="footer-widget-content">
                    <div class="footer-contacts footer-box">
                      <ul>
                        <li>
                          <span>Call :</span><a href="#">+489756412322</a> ,
                          <a href="#">+56897456123</a>
                        </li>
                        <li>
                          <span>Write :</span><a href="#">yourmail@domain.com</a>
                        </li>
                        <li>
                          <span>Find us : </span><a href="#">USA 27TH Brooklyn NY</a>
                        </li>
                      </ul>
                    </div>
                    <!-- <a href="contacts.html" class="footer-widget-content-link"
                        >Get in Touch</a
                      > -->
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="footer-widget">
                  <div class="footer-widget-title">Opening Hours</div>
                  <div class="footer-widget-content">
                    <div class="footer-work-time_widget footer-box">
                      <div class="row">
                        <div class="col-md-6">
                          <h6>Monday to Thurseday</h6>
                          <div class="footer-work-time">
                            10:00 AM<br />
                            10:00 PM
                          </div>
                        </div>
                        <div class="col-md-6">
                          <h6>Friday to Sunday</h6>
                          <div class="footer-work-time">
                            10:00 AM<br />
                            11:00 PM
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- <a href="#" class="footer-widget-content-link show-rb"
                        >Reserve Table</a
                      > -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- subbfooter -->
          <div class="subbfooter">
            <div class="policy-box">
              <span> &#169; Wanteat Restaurant 2024 </span> / All rights
              reserved.
            </div>
            <div class="pay_list">
              <ul>
                <li><i class="fa-brands fa-cc-visa"></i></li>
                <li><i class="fa-brands fa-cc-mastercard"></i></li>
                <li><i class="fa-brands fa-cc-paypal"></i></li>
              </ul>
            </div>
            <div class="to-top-btn to-top">
              <i class="fa-solid fa-chevrons-up"></i>
            </div>
          </div>
          <!-- subbfooter end -->
        </div>
        <div class="footer-bg"></div>
      </div>
    </footer>
    <!--footer end-->
  </div>
  <!-- Main end -->
  
  <!--=============== scripts  ===============-->

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const userRole = localStorage.getItem('userRole');
            console.log("userRole========>", userRole);
      // const userRole = "User"; //testing perpose
      const homeIcon = document.getElementById('home_icon');
      if(userRole == null || userRole == undefined){
        homeIcon.style.display = 'none';
      }
     else if (userRole === "Admin" || userRole === "Cheif" || userRole === "Captein") {
        homeIcon.style.display = "block";
      } else {
        homeIcon.style.display = 'none';

      }

    });
  </script>
  <script>

    // Function to parse query parameters from URL
    function getParameterByName(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, "\\$&");
      var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return "";
      return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    // Get the tableNumber from the URL query parameter
    const tableNumber = getParameterByName('tableNumber');
    // const tableNumber = getParameterByName('tableNumber','https://theprofficient.github.io/ResturantFrontend/menu.html?tableNumber=2'); //testing purpose
    console.log("tableNumber=====>", tableNumber);

    // Update the DOM to display the table number
    const tableNumberElement = document.getElementById('table-number');
    tableNumberElement.textContent = "Table Number : " + tableNumber;


    fetch("https://resturantapp.azurewebsites.net/api/v1/getAllDishes")
      .then((response) => response.json())
      .then((menuData) => {
        if (!menuData || !menuData.success || !menuData.data) {
          throw new Error("Invalid menu data format");
        }

        const container = document.querySelector(".container.small-container");
        const navList = document.getElementById("menu-sections-nav");

        for (const sectionName in menuData.data) {
          console.log(" menuData.data===>", menuData.data);
          if (menuData.data.hasOwnProperty(sectionName)) {
            const menuSection = menuData.data[sectionName];
            const sectionId = sectionName.toLowerCase().replace(/\s/g, "-"); // Generate section ID
           
            // Create menu container
            const menuContainer = document.createElement("div");
            menuContainer.classList.add("menu-container");
            menuContainer.id = `menu-section-${sectionId}`;

            // Create section title
            const sectionTitle = document.createElement("div");
            sectionTitle.classList.add("section-title");
            sectionTitle.innerHTML = `
                            <h2>${sectionName}</h2>
                            <h5>Ut enim ad minima veniam, quis nostrum exercitationem</h5>
                            <div class="section-title-separator_wrap">
                                <div class="section-title-separator"><span></span></div>
                            </div>
                        `;

            // Append section title to menu container
            menuContainer.appendChild(sectionTitle);

            // Create menu items wrapper
            const menuContainerWrap = document.createElement("div");
            menuContainerWrap.classList.add("menu-container-wrap");

            // Create and append menu items
            menuSection.forEach((item) => {
              const menuItem = document.createElement("div");
              menuItem.classList.add("hero-menu-item");
              menuItem.innerHTML = `
                                <a href="#" class="hero-menu-item-img image-popup">
                                    <img src="${item.dishImage}" alt="">
                                </a>
                                <div class="hero-menu-item-title">
                                    <h6><a href="#">${item.name}</a></h6>
                                    <span class="hero-menu-item-price">₹ ${item.price} /-</span>
                                    <div class="add_cart" onclick="addToCart('${item.name}', '${item.dishImage}', ${item.price},${tableNumber})">Add To Cart</div>
                                </div>
                                <div class="hero-menu-item-details">
                                    <p>${truncateDescription(item.desc)}</p>
                                </div>
                            `;
              menuContainerWrap.appendChild(menuItem);
            });

            // Function to truncate description
            function truncateDescription(description) {
              const words = description.split(" ");
              const truncatedDescription = words.slice(0, 10).join(" ");
              return `${truncatedDescription}...`;
            }

            // Append menu items wrapper to menu container
            menuContainer.appendChild(menuContainerWrap);

            // Append menu container to main container
            container.appendChild(menuContainer);

            // Create navigation link
            const navItem = document.createElement("li");
            navItem.innerHTML = `<a class="scroll-link fbgs" href="#menu-section-${sectionId}">${sectionName}</a>`;
            navList.appendChild(navItem);
          }
        }
      })
      .catch((error) => {
        console.error("Error fetching menu data:", error);
      });

      fetch(`https://resturantapp.azurewebsites.net/api/v1/getLastUnpaidOrderDetails/${tableNumber}`)
       .then((response) => response.json())
       .then((unPaidOrderData) => {
        console.log("unPaidOrderData=====>",unPaidOrderData);
        // Update cart icon and count
      const orderQuantity = unPaidOrderData.data;
      sessionStorage.setItem('unPaidItemsQnt',orderQuantity);
      updateOrdertUI(orderQuantity);
      })
      .catch((error) => {
        console.error("Error fetching unPaidOrderData data:", error);
      });
      let itemQuantity = 0
       // Function to update cart icon and count
    function updateOrdertUI(itemQuantity) {
      const orderItemCount = document.getElementById('order-item-count');
      orderItemCount.textContent = orderQuantity;
    }

  </script>

  <script>
    // Define cart variable in the global scope
    let cart = [];

    function addToCart(name, image, price, tableNumber) {
      // Check if the cart item exists in sessionStorage
      cart = sessionStorage.getItem('cart') ? JSON.parse(sessionStorage.getItem('cart')) : [];

      // Check if the item already exists in the cart
      const existingItemIndex = cart.findIndex(item => item.name === name);
      if (existingItemIndex !== -1) {
        // If the item already exists, increment its quantity
        cart[existingItemIndex].quantity++;
        cart[existingItemIndex].totalPrice += price;
      } else {
        // If the item doesn't exist, add it to the cart with quantity 1
        const item = {
          name: name,
          image: image,
          price: price,
          totalPrice: price,
          quantity: 1,
          tableNumber: tableNumber
        };
        cart.push(item);
      }

      console.log("Item added to cart:", name);
      console.log("Total items in cart:", cart);

      // Update cart icon and count
      const itemQuantity = cart.length;
      updateCartUI(itemQuantity);
      updateCartCount(itemQuantity);

      // Save the updated cart to sessionStorage
      sessionStorage.setItem('cart', JSON.stringify(cart));
      // Save the updated table number to sessionStorage
      sessionStorage.setItem('tableNumber', tableNumber);
    }
    function updateCartCount(count) {
        document.getElementById('cart-count').innerText = count;
    }
    // Function to update cart icon and count
    function updateCartUI(itemQuantity) {
      const cartItemCount = document.getElementById('cart-item-count');
      cartItemCount.textContent = itemQuantity;
    }
    function openCart() {
      // Redirect to the cart page or implement your desired functionality
      var cartPageURL = 'cart.html';

      // Redirect to the order.html page with the tableNumber parameter
      window.location.href = cartPageURL;
      console.log("Open cart clicked");
    }

    function openOrder() {
      // Redirect to the menu page with atblkeNumber 
      var orderPageURL = 'order.html?tableNumber=' + tableNumber ;

      // Redirect to the order.html page with the tableNumber parameter
      window.location.href = orderPageURL;
      console.log("Open order clicked");
    }
    document.addEventListener("DOMContentLoaded", function () {

      const backButton = document.getElementById("backButton");
  console.log("clicking back button====");
  // Check if the back button element is found
  if (backButton) {
    // Add event listener to the back button
    backButton.addEventListener('click', function() {
      console.log("calling the back button");
      // const cartPageURL  = cart.html ;
      // window.location.href = cartPageURL;
      window.history.back();
    });
  } else {
    console.error("Back button element not found.");
  }
      // Check if the cart item exists in sessionStorage
      if (sessionStorage.getItem('cart')) {
        // If it exists, parse it and assign it to the cart variable
        cart = JSON.parse(sessionStorage.getItem('cart'));

        // Now you can work with the cart variable
        console.log("Cart exists:", cart);

        // Call a function to update the UI based on the cart
        updateCartUI(cart.length);
        updateCartCount(cart.length);
      } else {
        // If the cart item does not exist in sessionStorage, initialize an empty cart array
        cart = [];

        // Optionally, you can store the empty cart array in sessionStorage
        sessionStorage.setItem('cart', JSON.stringify(cart));
        // Save the updated table number to sessionStorage
      sessionStorage.setItem('tableNumber', tableNumber);
        console.log("Cart does not exist. Initializing empty cart.");

        // Update the UI with the empty cart count
        updateCartUI(cart.length);
        updateCartCount(cart.length);
      }

      //  // Attach event listener to cart button
      //  const cartButton = document.getElementById('cart-button');
      //  cartButton.addEventListener('click', openCart);
    });
  </script>

  <script src="js/jquery.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/scripts.js"></script>
</body>

<!-- Mirrored from wanteat.kwst.net/site/menu.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Feb 2024 08:24:36 GMT -->

</html>